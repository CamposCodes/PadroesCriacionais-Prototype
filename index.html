<!DOCTYPE html>
<html lang="pt-br">
<head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>Sistema Bar e Cafeteria - Prototype Pattern</title>
</head>
<body>
    <div class="container">
        <h1>‚òï Sistema Bar/Cafeteria - Prototype Pattern</h1>

        <!-- Estat√≠sticas -->
        <div class="stats" role="region" aria-label="Estat√≠sticas do Prototype">
            <div class="stat" id="totalOrders" aria-live="polite">
                <div class="stat-icon">üì¶</div>
                <div class="stat-content">
                    <div class="stat-number">0</div>
                    <div class="stat-label">Pedidos Criados</div>
                </div>
            </div>

            <div class="stat" id="totalClones" aria-live="polite">
                <div class="stat-icon">üîÑ</div>
                <div class="stat-content">
                    <div class="stat-number">0</div>
                    <div class="stat-label">Clonagens</div>
                </div>
            </div>

            <div class="stat" id="totalValue" aria-live="polite">
                <div class="stat-icon">üí∞</div>
                <div class="stat-content">
                    <div class="stat-number">R$ 0</div>
                    <div class="stat-label">Valor Total</div>
                </div>
            </div>

            <div class="stat" id="grande" aria-live="polite">
                <div class="stat-icon">üìè</div>
                <div class="stat-content">
                    <div class="stat-number">0</div>
                    <div class="stat-label">Tamanho Grande</div>
                </div>
            </div>

            <div class="stat" id="pequeno" aria-live="polite">
                <div class="stat-icon">ü§è</div>
                <div class="stat-content">
                    <div class="stat-number">0</div>
                    <div class="stat-label">Tamanho Pequeno</div>
                </div>
            </div>

            <div class="stat" id="extra" aria-live="polite">
                <div class="stat-icon">üìèüìè</div>
                <div class="stat-content">
                    <div class="stat-number">0</div>
                    <div class="stat-label">Extra Grande</div>
                </div>
            </div>
        </div>

        <!-- Controles -->
        <div class="card">
            <h2>Criar Pedidos via Clonagem</h2>
            <div class="control-group">
                <div class="template-select">
                    <label for="templateSelect">Template Base:</label>
                    <select id="templateSelect">
                        <option value="cappuccino">‚òï Cappuccino (R$ 12.50)</option>
                        <option value="latte">‚òï Latte (R$ 14.00)</option>
                        <option value="espresso">‚òï Espresso (R$ 8.50)</option>
                        <option value="cerveja">üç∫ Cerveja (R$ 10.00)</option>
                    </select>
                </div>
                <div class="size-select">
                    <label for="sizeSelect">Tamanho do Clone:</label>
                    <select id="sizeSelect">
                        <option value="pequeno">ü§è Pequeno</option>
                        <option value="grande">üìè Grande</option>
                        <option value="extra">üìèüìè Extra Grande</option>
                    </select>
                </div>
                <div class="quantity-select">
                    <label for="quantitySelect">Quantidade:</label>
                    <select id="quantitySelect">
                        <option value="1">1</option>
                        <option value="2">2</option>
                        <option value="3">3</option>
                        <option value="5">5</option>
                        <option value="10">10</option>
                    </select>
                </div>
            </div>
            <div class="buttons">
                <button class="add" onclick="createSingleOrder()">+ Clonar Pedido</button>
                <button class="bulk-10" onclick="createBulkOrders(5)">+ 5 Pedidos</button>
                <button class="bulk-50" onclick="createBulkOrders(10)">+ 10 Pedidos</button>
                <button class="bulk-100" onclick="createBulkOrders(20)">+ 20 Pedidos</button>
                <button class="clear" onclick="clearOrders()">Limpar Tudo</button>
            </div>
        </div>

        <!-- Visualiza√ß√£o do Template -->
        <div class="card template-section">
            <h2>üìã Template Base (Prot√≥tipo)</h2>
            <div id="templateDisplay" class="template-display">
                <div class="template-item">
                    <div class="template-icon">‚òï</div>
                    <div class="template-info">
                        <div class="template-name">Cappuccino</div>
                        <div class="template-details">
                            <span class="badge">C√≥digo: 101</span>
                            <span class="badge">R$ 12.50</span>
                            <span class="badge">Grande</span>
                            <span class="badge">Qty: 1</span>
                        </div>
                    </div>
                </div>
            </div>
            <div class="template-warning">
                <strong>üîí O template NUNCA muda!</strong> Serve como prot√≥tipo para clonar.
            </div>
        </div>

        <!-- Lista de pedidos clonados -->
        <div class="card orders" id="ordersList">
            <h2>Pedidos Clonados (<span id="orderCount">0</span>)</h2>
            <div id="ordersContainer">Nenhum pedido clonado ainda. Clique em "Clonar Pedido".</div>
        </div>

        <!-- Compara√ß√£o Independ√™ncia -->
        <div class="card comparison-section">
            <h2>üîç Valida√ß√£o de Independ√™ncia</h2>
            <div id="comparisonDisplay">
                <p style="color: #6a737d; text-align: center;">Crie pedidos para ver a compara√ß√£o...</p>
            </div>
        </div>

        <!-- Explica√ß√£o -->
        <div class="card">
            <h3>üéì Como Funciona o Prototype Pattern</h3>
            <div class="explanation">
                <div class="concept">
                    <strong>üéØ O Padr√£o Prototype:</strong>
                    <p>Cria novos objetos clonando um prot√≥tipo existente (template), em vez de criar do zero.</p>
                </div>
                <div class="concept">
                    <strong>üîÑ Fluxo de Clonagem:</strong>
                    <p>Template Base ‚Üí clone() ‚Üí Novo Pedido Independente ‚Üí Personalizar</p>
                </div>
                <div class="concept">
                    <strong>‚úÖ Vantagens:</strong>
                    <ul style="margin: 8px 0 0 0;">
                        <li>‚úì Cria√ß√£o r√°pida de novos objetos</li>
                        <li>‚úì C√≥pia independente com Deep Copy</li>
                        <li>‚úì Template imut√°vel = card√°pio seguro</li>
                        <li>‚úì Personaliza√ß√£o sem afetar outros</li>
                    </ul>
                </div>
                <div class="concept">
                    <strong>‚ö° Padr√£o Complementar:</strong>
                    <p><strong>Deep Copy:</strong> Garante que objetos aninhados (Localizacao) tamb√©m sejam clonados independentemente</p>
                </div>
            </div>
        </div>

        <!-- Demonstra√ß√£o Visual de Deep Copy -->
        <div class="card">
            <h3>üíæ Visualiza√ß√£o em Mem√≥ria (Deep Copy)</h3>
            <div id="memoryDisplay" class="memory-section">
                <p style="color: #6a737d; text-align: center;">Crie pedidos para ver a representa√ß√£o em mem√≥ria...</p>
            </div>
        </div>
    </div>

    <script>
        const ordersContainer = document.getElementById('ordersContainer');
        const orderCountSpan = document.getElementById('orderCount');

        const templates = {
            'cappuccino': { name: 'Cappuccino', icon: '‚òï', code: 101, price: 12.50, size: 'Grande', sector: 'Balc√£o' },
            'latte': { name: 'Latte', icon: '‚òï', code: 102, price: 14.00, size: 'Grande', sector: 'Balc√£o' },
            'espresso': { name: 'Espresso', icon: '‚òï', code: 103, price: 8.50, size: 'Grande', sector: 'Balc√£o' },
            'cerveja': { name: 'Cerveja', icon: 'üç∫', code: 104, price: 10.00, size: 'Grande', sector: 'Bar' }
        };

        const sizeMultipliers = {
            'pequeno': { multiplier: 0.8, label: 'Pequeno' },
            'grande': { multiplier: 1.0, label: 'Grande' },
            'extra': { multiplier: 1.3, label: 'Extra Grande' }
        };

        let orders = [];
        let stats = {
            totalOrders: 0,
            totalClones: 0,
            totalValue: 0,
            sizes: { pequeno: 0, grande: 0, extra: 0 }
        };

        // Simula√ß√£o do Padr√£o Prototype
        const prototype = {
            clone: function(templateKey, size, quantity) {
                const template = templates[templateKey];
                const sizeData = sizeMultipliers[size];
                
                // Deep Copy - cria novo objeto independente
                const clonedOrder = {
                    id: Math.random().toString(36).substr(2, 9),
                    originalTemplate: templateKey,
                    name: template.name,
                    icon: template.icon,
                    code: template.code,
                    basePrice: template.price,
                    price: template.price * sizeData.multiplier,
                    originalSize: template.size,
                    size: sizeData.label,
                    quantity: quantity,
                    sector: template.sector,
                    totalPrice: (template.price * sizeData.multiplier) * quantity,
                    createdAt: new Date().toLocaleTimeString('pt-BR'),
                    mesa: Math.floor(Math.random() * 20) + 1,
                    hora: new Date().toLocaleTimeString('pt-BR', { hour: '2-digit', minute: '2-digit' })
                };

                stats.totalClones++;
                return clonedOrder;
            }
        };

        function updateTemplateDisplay() {
            const template = templates['cappuccino'];
            document.getElementById('templateDisplay').innerHTML = `
                <div class="template-item">
                    <div class="template-icon">${template.icon}</div>
                    <div class="template-info">
                        <div class="template-name">${template.name}</div>
                        <div class="template-details">
                            <span class="badge">C√≥digo: ${template.code}</span>
                            <span class="badge">R$ ${template.price.toFixed(2)}</span>
                            <span class="badge">${template.size}</span>
                            <span class="badge">Qty: 1</span>
                        </div>
                    </div>
                </div>
            `;
        }

        function createSingleOrder() {
            const templateKey = document.getElementById('templateSelect').value;
            const size = document.getElementById('sizeSelect').value;
            const quantity = parseInt(document.getElementById('quantitySelect').value);

            const order = prototype.clone(templateKey, size, quantity);
            orders.push(order);

            stats.totalOrders++;
            stats.totalValue += order.totalPrice;
            stats.sizes[size]++;

            updateDisplay();
            updateStats();
            updateComparison();
            updateMemoryDisplay();
        }

        function createBulkOrders(count) {
            const templateKeys = Object.keys(templates);
            const sizeKeys = Object.keys(sizeMultipliers);

            for (let i = 0; i < count; i++) {
                const templateKey = templateKeys[Math.floor(Math.random() * templateKeys.length)];
                const size = sizeKeys[Math.floor(Math.random() * sizeKeys.length)];
                const quantity = Math.floor(Math.random() * 5) + 1;

                const order = prototype.clone(templateKey, size, quantity);
                orders.push(order);

                stats.totalOrders++;
                stats.totalValue += order.totalPrice;
                stats.sizes[size]++;
            }

            updateDisplay();
            updateStats();
            updateComparison();
            updateMemoryDisplay();
        }

        function updateDisplay() {
            document.getElementById('orderCount').innerText = orders.length;
            ordersContainer.innerHTML = '';

            if (orders.length === 0) {
                ordersContainer.innerHTML = 'Nenhum pedido clonado ainda. Clique em "Clonar Pedido".';
                return;
            }

            const recent = orders.slice(-50).reverse();
            recent.forEach((order) => {
                const div = document.createElement('div');
                div.className = 'order';

                const iconSpan = document.createElement('span');
                iconSpan.className = 'icon';
                iconSpan.textContent = order.icon;

                const detailsDiv = document.createElement('div');
                detailsDiv.className = 'order-details';

                const desc = document.createElement('div');
                desc.className = 'info';
                desc.innerHTML = `<strong>${order.name}</strong><br/>
                    ${order.icon} ${order.size} ‚Ä¢ Qty: ${order.quantity} ‚Ä¢ Mesa ${order.mesa} ‚Ä¢ ${order.createdAt}`;

                const metricsDiv = document.createElement('div');
                metricsDiv.className = 'metrics';
                metricsDiv.innerHTML = `<span class="price">üí∞ R$ ${order.totalPrice.toFixed(2)}</span>
                    <span class="processing">‚ö° Clone ID: ${order.id.substr(0, 6)}</span>`;

                detailsDiv.appendChild(desc);
                detailsDiv.appendChild(metricsDiv);
                div.appendChild(iconSpan);
                div.appendChild(detailsDiv);
                ordersContainer.appendChild(div);
            });
        }

        function updateStats() {
            const setStat = (id, value, suffix = '') => {
                const el = document.getElementById(id);
                const num = el.querySelector('.stat-number');
                if (num) num.innerText = value + suffix;
            };

            setStat('totalOrders', stats.totalOrders);
            setStat('totalClones', stats.totalClones);
            setStat('totalValue', 'R$ ' + stats.totalValue.toFixed(2));
            setStat('grande', stats.sizes.grande);
            setStat('pequeno', stats.sizes.pequeno);
            setStat('extra', stats.sizes.extra);
        }

        function updateComparison() {
            if (orders.length === 0) {
                document.getElementById('comparisonDisplay').innerHTML = 
                    '<p style="color: #6a737d; text-align: center;">Crie pedidos para ver a compara√ß√£o...</p>';
                return;
            }

            const template = templates['cappuccino'];
            const recent = orders.slice(-3);

            let html = `
                <div class="comparison-table">
                    <div class="comparison-row header">
                        <div class="comparison-cell">Atributo</div>
                        <div class="comparison-cell">Template</div>
            `;

            recent.forEach((order, idx) => {
                html += `<div class="comparison-cell">Pedido ${idx + 1}</div>`;
            });

            html += `
                    </div>
                    <div class="comparison-row">
                        <div class="comparison-cell"><strong>Nome</strong></div>
                        <div class="comparison-cell">${template.name}</div>
            `;

            recent.forEach((order) => {
                const different = order.name !== template.name ? 'different' : '';
                html += `<div class="comparison-cell ${different}">${order.name}</div>`;
            });

            html += `
                    </div>
                    <div class="comparison-row">
                        <div class="comparison-cell"><strong>Tamanho</strong></div>
                        <div class="comparison-cell">${template.size}</div>
            `;

            recent.forEach((order) => {
                const different = order.size !== template.size ? 'different' : '';
                html += `<div class="comparison-cell ${different}">${order.size}</div>`;
            });

            html += `
                    </div>
                    <div class="comparison-row">
                        <div class="comparison-cell"><strong>Pre√ßo Unit.</strong></div>
                        <div class="comparison-cell">R$ ${template.price.toFixed(2)}</div>
            `;

            recent.forEach((order) => {
                const different = order.price !== template.price ? 'different' : '';
                html += `<div class="comparison-cell ${different}">R$ ${order.price.toFixed(2)}</div>`;
            });

            html += `
                    </div>
                    <div class="comparison-row">
                        <div class="comparison-cell"><strong>Quantidade</strong></div>
                        <div class="comparison-cell">1</div>
            `;

            recent.forEach((order) => {
                const different = order.quantity !== 1 ? 'different' : '';
                html += `<div class="comparison-cell ${different}">${order.quantity}</div>`;
            });

            html += `
                    </div>
                    <div class="comparison-row">
                        <div class="comparison-cell"><strong>Total</strong></div>
                        <div class="comparison-cell">R$ ${template.price.toFixed(2)}</div>
            `;

            recent.forEach((order) => {
                html += `<div class="comparison-cell highlight">R$ ${order.totalPrice.toFixed(2)}</div>`;
            });

            html += `
                    </div>
                    <div class="comparison-row">
                        <div class="comparison-cell"><strong>Mesa</strong></div>
                        <div class="comparison-cell">0</div>
            `;

            recent.forEach((order) => {
                html += `<div class="comparison-cell different">${order.mesa}</div>`;
            });

            html += `
                    </div>
                </div>
                <div class="independence-check">
                    <strong>‚úÖ Valida√ß√£o:</strong>
                    <ul>
                        <li>‚úì Template permanece <strong>INALTERADO</strong></li>
                        <li>‚úì Cada pedido √© <strong>INDEPENDENTE</strong></li>
                        <li>‚úì Modifica√ß√µes n√£o afetam outros pedidos</li>
                        <li>‚úì Deep Copy garantindo isolamento total</li>
                    </ul>
                </div>
            `;

            document.getElementById('comparisonDisplay').innerHTML = html;
        }

        function updateMemoryDisplay() {
            if (orders.length === 0) {
                document.getElementById('memoryDisplay').innerHTML = 
                    '<p style="color: #6a737d; text-align: center;">Crie pedidos para ver a representa√ß√£o em mem√≥ria...</p>';
                return;
            }

            const template = templates['cappuccino'];
            const first = orders[0];

            let html = `
                <div class="memory-viz">
                    <div class="memory-box">
                        <div class="memory-title">TEMPLATE (Original)</div>
                        <div class="memory-content">
                            <div class="memory-line">
                                <span class="var">template</span> ‚Üí <span class="ref">@0x1000</span>
                            </div>
                            <div class="memory-line indent">
                                ‚îú‚îÄ name: <span class="value">"${template.name}"</span>
                            </div>
                            <div class="memory-line indent">
                                ‚îú‚îÄ price: <span class="value">${template.price}</span>
                            </div>
                            <div class="memory-line indent">
                                ‚îî‚îÄ quantity: <span class="value">1</span>
                            </div>
                        </div>
                    </div>

                    <div class="memory-arrow">‚¨áÔ∏è clone() ‚¨áÔ∏è</div>

                    <div class="memory-box highlight">
                        <div class="memory-title">PEDIDO 1 (Clone Independente)</div>
                        <div class="memory-content">
                            <div class="memory-line">
                                <span class="var">pedido1</span> ‚Üí <span class="ref">@0x3000</span> <span class="note">(DIFERENTE!)</span>
                            </div>
                            <div class="memory-line indent">
                                ‚îú‚îÄ name: <span class="value">"${first.name}"</span>
                            </div>
                            <div class="memory-line indent">
                                ‚îú‚îÄ price: <span class="value">${first.price.toFixed(2)}</span> <span class="modified">(MODIFICADO)</span>
                            </div>
                            <div class="memory-line indent">
                                ‚îî‚îÄ quantity: <span class="value">${first.quantity}</span> <span class="modified">(MODIFICADO)</span>
                            </div>
                        </div>
                    </div>
                </div>

                <div class="deep-copy-explanation">
                    <strong>üîê Deep Copy em A√ß√£o:</strong>
                    <p>
                        O clone n√£o apenas copia refer√™ncias - cria um novo objeto completamente independente.
                        Modificar <strong>pedido1.quantity</strong> n√£o afeta o template original.
                        Isso √© garantido pelo m√©todo <code>clone()</code> com Deep Copy de objetos aninhados.
                    </p>
                </div>
            `;

            document.getElementById('memoryDisplay').innerHTML = html;
        }

        function clearOrders() {
            orders = [];
            stats = {
                totalOrders: 0,
                totalClones: 0,
                totalValue: 0,
                sizes: { pequeno: 0, grande: 0, extra: 0 }
            };
            updateDisplay();
            updateStats();
            updateComparison();
            updateMemoryDisplay();
        }

        // Inicializa√ß√£o
        updateTemplateDisplay();
        updateStats();
    </script>

    <style>
        :root {
            --bg: #f6f8fa;
            --surface: #ffffff;
            --muted: #6a737d;
            --border: #e1e4e8;
            --accent: #8B5A3C;
            --secondary: #D4A574;
            --success: #28a745;
            --warning: #ffc107;
            --danger: #d73a49;
            --shadow: 0 1px 2px rgba(27, 31, 35, 0.04), 0 8px 24px rgba(27, 31, 35, 0.08);
        }

        html, body {
            height: 100%;
        }

        body {
            margin: 0;
            font-family: -apple-system, BlinkMacSystemFont, "Segoe UI", Roboto, "Helvetica Neue", Arial;
            background: var(--bg);
            color: #24292e;
            -webkit-font-smoothing: antialiased;
        }

        .container {
            max-width: 1100px;
            margin: 32px auto;
            padding: 20px;
        }

        h1 {
            font-size: 1.6rem;
            margin: 0 0 8px 0;
            color: var(--accent);
        }

        h2 {
            font-size: 1.2rem;
            margin: 0 0 12px 0;
            color: #24292e;
        }

        h3 {
            font-size: 1.1rem;
            margin: 0 0 12px 0;
            color: #24292e;
        }

        .card {
            background: var(--surface);
            border: 1px solid var(--border);
            border-radius: 8px;
            box-shadow: var(--shadow);
            padding: 18px;
            margin-bottom: 18px;
        }

        /* Estat√≠sticas em grid responsivo */
        .stats {
            display: grid;
            grid-template-columns: repeat(6, minmax(0, 1fr));
            gap: 12px;
            margin-bottom: 14px;
        }

        .stat {
            display: flex;
            gap: 12px;
            align-items: center;
            padding: 14px;
            border-radius: 10px;
            background: linear-gradient(180deg, #ffffff, #fbfdff);
            border: 1px solid var(--border);
        }

        .stat-icon {
            width: 48px;
            height: 48px;
            border-radius: 10px;
            display: flex;
            align-items: center;
            justify-content: center;
            font-size: 1.4rem;
            background: rgba(139, 90, 60, 0.08);
            color: var(--accent);
            flex-shrink: 0;
        }

        .stat-content {
            display: flex;
            flex-direction: column;
        }

        .stat-number {
            font-size: 1.4rem;
            font-weight: 700;
            color: #092a4a;
        }

        .stat-label {
            font-size: 0.75rem;
            color: var(--muted);
            margin-top: 2px;
            line-height: 1.2;
        }

        /* Controles */
        .control-group {
            display: flex;
            gap: 16px;
            margin-bottom: 12px;
            flex-wrap: wrap;
        }

        .template-select, .size-select, .quantity-select {
            display: flex;
            flex-direction: column;
            gap: 6px;
            flex: 1;
            min-width: 150px;
        }

        .template-select label, .size-select label, .quantity-select label {
            font-size: 0.9rem;
            font-weight: 600;
            color: #24292e;
        }

        select {
            padding: 8px 12px;
            border-radius: 6px;
            border: 1px solid var(--border);
            background: var(--surface);
            cursor: pointer;
            font-size: 0.95rem;
        }

        select:focus {
            outline: none;
            border-color: var(--accent);
            box-shadow: 0 0 0 3px rgba(139, 90, 60, 0.1);
        }

        .buttons {
            display: flex;
            gap: 10px;
            flex-wrap: wrap;
            margin-top: 10px;
        }

        button {
            padding: 8px 12px;
            border-radius: 6px;
            border: 1px solid var(--border);
            background: var(--surface);
            cursor: pointer;
            font-weight: 600;
            font-size: 0.9rem;
            transition: all 0.2s;
        }

        button:hover {
            opacity: 0.95;
            transform: translateY(-1px);
        }

        button.add {
            background: var(--accent);
            color: #fff;
            border-color: transparent;
        }

        button.bulk-10 {
            background: var(--secondary);
            color: #fff;
            border-color: transparent;
        }

        button.bulk-50 {
            background: #6f42c1;
            color: #fff;
            border-color: transparent;
        }

        button.bulk-100 {
            background: var(--danger);
            color: #fff;
            border-color: transparent;
        }

        button.clear {
            background: transparent;
        }

        /* Template Display */
        .template-section {
            background: linear-gradient(135deg, #fff9e6 0%, #ffe6cc 100%);
            border: 2px solid var(--secondary);
        }

        .template-display {
            padding: 20px;
            background: white;
            border-radius: 8px;
            margin-bottom: 15px;
        }

        .template-item {
            display: flex;
            gap: 20px;
            align-items: center;
        }

        .template-icon {
            font-size: 3rem;
            width: 80px;
            height: 80px;
            display: flex;
            align-items: center;
            justify-content: center;
            background: rgba(139, 90, 60, 0.1);
            border-radius: 10px;
        }

        .template-name {
            font-size: 1.5rem;
            font-weight: 700;
            color: var(--accent);
            margin-bottom: 8px;
        }

        .template-details {
            display: flex;
            gap: 8px;
            flex-wrap: wrap;
        }

        .badge {
            background: var(--secondary);
            color: white;
            padding: 6px 12px;
            border-radius: 20px;
            font-size: 0.85rem;
            font-weight: 600;
        }

        .template-warning {
            background: #fff3cd;
            border: 1px solid #ffc107;
            padding: 12px;
            border-radius: 6px;
            color: #856404;
            font-size: 0.9rem;
        }

        /* Pedidos */
        .orders {
            max-height: 500px;
            overflow-y: auto;
        }

        .order {
            display: flex;
            gap: 12px;
            align-items: center;
            padding: 12px;
            border-radius: 8px;
            border: 1px solid var(--border);
            background: linear-gradient(180deg, #fff, #fcfeff);
            margin-top: 10px;
            transition: all 0.2s;
        }

        .order:hover {
            background: linear-gradient(180deg, #fff, #f8fbff);
            border-color: var(--accent);
        }

        .order .icon {
            width: 48px;
            height: 48px;
            border-radius: 8px;
            background: linear-gradient(180deg, #f1f7fd, #fff);
            display: flex;
            align-items: center;
            justify-content: center;
            font-size: 1.4rem;
            flex-shrink: 0;
        }

        .order .order-details {
            flex: 1;
        }

        .order .info {
            font-size: 0.95rem;
            line-height: 1.4;
        }

        .order .info strong {
            color: var(--accent);
            font-weight: 600;
        }

        .order .metrics {
            display: flex;
            gap: 12px;
            margin-top: 6px;
            font-size: 0.85rem;
        }

        .order .metrics span {
            padding: 4px 8px;
            border-radius: 4px;
            background: rgba(139, 90, 60, 0.08);
            color: var(--accent);
        }

        /* Compara√ß√£o */
        .comparison-section {
            background: #f0f9ff;
            border: 2px solid #0284c7;
        }

        .comparison-table {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(150px, 1fr));
            gap: 1px;
            background: var(--border);
            border-radius: 8px;
            overflow: hidden;
            margin-bottom: 15px;
        }

        .comparison-row {
            display: contents;
        }

        .comparison-row.header {
            display: contents;
        }

        .comparison-row.header .comparison-cell {
            background: var(--accent);
            color: white;
            font-weight: 600;
            padding: 12px;
        }

        .comparison-cell {
            background: white;
            padding: 12px;
            text-align: center;
            font-size: 0.9rem;
        }

        .comparison-cell.different {
            background: #fff3cd;
            color: #856404;
            font-weight: 600;
        }

        .comparison-cell.highlight {
            background: #d4edda;
            color: #155724;
            font-weight: 600;
        }

        .independence-check {
            background: #d4edda;
            border: 1px solid #28a745;
            padding: 12px;
            border-radius: 6px;
            color: #155724;
            font-size: 0.9rem;
        }

        .independence-check ul {
            margin: 8px 0 0 0;
            padding-left: 18px;
        }

        .independence-check li {
            margin: 4px 0;
        }

        /* Memory Display */
        .memory-section {
            background: #f8f9fa;
            padding: 20px;
            border-radius: 8px;
            border: 1px solid var(--border);
        }

        .memory-viz {
            font-family: 'Courier New', monospace;
            font-size: 0.85rem;
            line-height: 1.6;
        }

        .memory-box {
            background: white;
            padding: 15px;
            border-radius: 6px;
            margin-bottom: 10px;
            border-left: 4px solid var(--accent);
        }

        .memory-box.highlight {
            border-left-color: var(--secondary);
            background: #fffbf0;
        }

        .memory-title {
            font-weight: 700;
            color: var(--accent);
            margin-bottom: 10px;
        }

        .memory-content {
            color: #24292e;
        }

        .memory-line {
            margin: 4px 0;
        }

        .memory-line.indent {
            margin-left: 20px;
        }

        .var {
            color: #0284c7;
            font-weight: 600;
        }

        .ref {
            color: #d97706;
            font-weight: 600;
        }

        .value {
            color: #059669;
        }

        .modified {
            background: #fff3cd;
            padding: 2px 6px;
            border-radius: 3px;
            color: #856404;
            font-weight: 600;
            font-size: 0.8rem;
        }

        .note {
            color: #6a737d;
            font-size: 0.8rem;
        }

        .memory-arrow {
            text-align: center;
            color: var(--accent);
            font-weight: 700;
            margin: 15px 0;
            font-size: 1.2rem;
        }

        .deep-copy-explanation {
            background: #e8f5e9;
            border-left: 4px solid #28a745;
            padding: 12px;
            border-radius: 6px;
            margin-top: 15px;
            font-size: 0.9rem;
        }

        .deep-copy-explanation strong {
            color: #1b5e20;
        }

        .deep-copy-explanation code {
            background: #f5f5f5;
            padding: 2px 6px;
            border-radius: 3px;
            font-family: 'Courier New', monospace;
        }

        /* Explica√ß√£o */
        .explanation {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(250px, 1fr));
            gap: 12px;
            margin-top: 12px;
        }

        .concept {
            padding: 12px;
            border-radius: 6px;
            background: #f6f8fa;
            border-left: 4px solid var(--accent);
        }

        .concept strong {
            color: var(--accent);
        }

        .concept p {
            margin: 6px 0 0 0;
            font-size: 0.9rem;
            color: #24292e;
        }

        .concept ul {
            margin: 6px 0 0 0;
            padding-left: 18px;
            font-size: 0.9rem;
        }

        .concept li {
            margin: 4px 0;
        }

        /* Scrollbar personalizada */
        .orders::-webkit-scrollbar {
            width: 8px;
        }

        .orders::-webkit-scrollbar-track {
            background: #f0f0f0;
            border-radius: 10px;
        }

        .orders::-webkit-scrollbar-thumb {
            background: var(--secondary);
            border-radius: 10px;
        }

        .orders::-webkit-scrollbar-thumb:hover {
            background: var(--accent);
        }

        /* Responsividade */
        @media (max-width: 1000px) {
            .stats {
                grid-template-columns: repeat(3, minmax(0, 1fr));
            }
        }

        @media (max-width: 700px) {
            .stats {
                grid-template-columns: repeat(2, minmax(0, 1fr));
            }

            .control-group {
                flex-direction: column;
            }

            .template-select, .size-select, .quantity-select {
                min-width: 100%;
            }

            .buttons {
                flex-direction: column;
            }

            button {
                width: 100%;
            }

            .order {
                flex-direction: column;
                align-items: flex-start;
            }

            .order .metrics {
                width: 100%;
            }

            .template-item {
                flex-direction: column;
                text-align: center;
            }

            .comparison-table {
                grid-template-columns: 1fr;
            }
        }

        @media (max-width: 500px) {
            .stats {
                grid-template-columns: 1fr;
            }

            h1 {
                font-size: 1.3rem;
            }

            .container {
                margin: 16px auto;
                padding: 12px;
            }

            .template-icon {
                width: 60px;
                height: 60px;
                font-size: 2rem;
            }

            .template-name {
                font-size: 1.2rem;
            }
        }
    </style>
</body>
</html>
